<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=480">

    <link rel="stylesheet" type="text/css" media="screen" href="/capnproto/next/stylesheets/stylesheet.css">

    <title>Cap'n Proto: Installation</title>

    <script type="text/javascript" src="/capnproto/next/javascripts/main.js"></script>
  </head>

  <body class="desktop">

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
      <header class="inner">
        <img src="/capnproto/next/images/logo.png">
        <div id="infinitely_faster">
          <img src="/capnproto/next/images/infinitely_faster.png">
        </div>
      </header>
      <a id="discuss_banner" href="https://groups.google.com/group/capnproto">Discuss on Groups</a>
      <a id="forkme_banner" href="https://github.com/kentonv/capnproto">View on GitHub</a>
    </div>

    
    <div id="next_banner">
      <h1>PREVIEW</h1>
      <p>You are looking at the site as it will appear after the next release.  This is a draft
         version that may be incomplete, buggy, or not yet applicable.  To look at the current
         site, <a href="../">click here</a>.
    </div>
    

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">

      <section id="menu">
        <ul>
          <li><a href="/capnproto/next/index.html">Introduction</a></li>
          <li><a href="/capnproto/next/news/">News</a></li>
          <li><a href="/capnproto/next/install.html">Installation</a></li>
          <li><a href="/capnproto/next/language.html">Schema Language</a></li>
          <li><a href="/capnproto/next/encoding.html">Encoding</a></li>
          <li><a href="/capnproto/next/rpc.html">RPC Protocol</a></li>
          <li><a href="/capnproto/next/capnp-tool.html">The <code>capnp</code> Tool</a></li>
          <li><a href="/capnproto/next/cxx.html">C++ Serialization</a></li>
          <li><a href="/capnproto/next/cxxrpc.html">C++ RPC</a></li>
          <li><a href="/capnproto/next/otherlang.html">Other Languages</a></li>
          <li><a href="/capnproto/next/roadmap.html">Road Map</a></li>
          <li><a href="/capnproto/next/faq.html">FAQ</a></li>
        </ul>
      </section>
      <section id="main_content" class="inner">

<h1 id="installation-tools-and-c-runtime">Installation: Tools and C++ Runtime</h1>

<p>The Cap’n Proto tools, including the compiler (which takes <code>.capnp</code> files and generates source code
for them), are written in C++.  Therefore, you must install the C++ package even if your actual
development language is something else.</p>

<p>This package is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>.</p>

<h2 id="caveats">Caveats</h2>

<p style="font-size: 125%; font-weight: bold;">Cap'n Proto is in BETA</p>

<div style="float: right"><a class="groups_link" style="color: #fff" href="https://groups.google.com/group/capnproto-announce">Sign Up for Updates</a></div>

<p>As of this writing, Cap’n Proto is in beta.  The serialization layer is close to feature-complete
and we don’t anticipate any further changes to the wire format.  That said, if you want to use it,
you should keep in mind some caveats:</p>

<ul>
  <li><strong>Security:</strong> Cap’n Proto has not yet had a security review.  Although Kenton has a background
in security and is not aware of any vulnerabilities in the current code, it’s likely that there
are a few.  For now, do not accept Cap’n Proto messages from parties you do not trust.</li>
  <li><strong>API Stability:</strong> The Cap’n Proto programming interface may still change in ways that break
existing code.  Such changes are likely to be minor and should not affect the wire format.</li>
  <li><strong>Performance:</strong> While Cap’n Proto is inherently fast by design, the implementation has not yet
undergone serious profiling and optimization.  Currently it only beats Protobufs in realistic-ish
end-to-end benchmarks by around 2x-5x.  We can do better.</li>
  <li><strong>RPC:</strong> The RPC implementation particularly experimental, though it is used heavily by
<a href="https://sandstorm.io">Sandstorm.io</a>.</li>
</ul>

<p>If you’d like to hack on Cap’n Proto, you should join the
<a href="https://groups.google.com/group/capnproto">discussion group</a>!</p>

<p>If you’d just like to receive updates as things progress, add yourself to the
<a href="https://groups.google.com/group/capnproto-announce">announce list</a>.</p>

<h2 id="prerequisites">Prerequisites</h2>

<h3 id="supported-compilers">Supported Compilers</h3>

<p>Cap’n Proto makes extensive use of C++11 language features. As a result, it requires a relatively
new version of a well-supported compiler. The minimum versions are:</p>

<ul>
  <li>GCC 4.8</li>
  <li>Clang 3.3</li>
  <li>Visual C++ 2015 (lite mode only)</li>
</ul>

<p>If your system’s default compiler is older that the above, you will need to install a newer
compiler and set the <code>CXX</code> environment variable before trying to build Cap’n Proto. For example,
after installing GCC 4.8, you could set <code>CXX=g++-4.8</code> to use this compiler.</p>

<h3 id="supported-operating-systems">Supported Operating Systems</h3>

<p>In theory, Cap’n Proto should work on any POSIX platform supporting one of the above compilers,
as well as on Windows. We test every Cap’n Proto release on the following platforms:</p>

<ul>
  <li>Android</li>
  <li>Linux</li>
  <li>Mac OS X</li>
  <li>Windows - Cygwin</li>
  <li>Windows - MinGW-w64 (lite mode and compiler binary only)</li>
  <li>Windows - Visual C++ (lite mode only)</li>
</ul>

<p><strong>Windows users:</strong> As of Visual Studio 2015, Visual C++ still does not support enough of C++11 to
compile Cap’n Proto’s reflection or RPC APIs. “Cap’n Proto Lite” omits these features from the
library, giving you only the core serialization based on generated code.</p>

<p><strong>Mac OS X users:</strong> You must use at least Xcode 5 with the Xcode command-line
tools (Xcode menu &gt; Preferences &gt; Downloads).  Alternatively, the command-line tools
package from <a href="https://developer.apple.com/downloads/">Apple</a> or compiler builds from
<a href="http://www.macports.org/">Macports</a>, <a href="http://www.finkproject.org/">Fink</a>, or
<a href="http://brew.sh/">Homebrew</a> are reported to work.</p>

<h2 id="installation-unix">Installation: Unix</h2>

<p>You may download and install the release version of Cap’n Proto like so:</p>

<pre><code>curl -O <a href="https://capnproto.org/capnproto-c++-0.0.0.tar.gz">https://capnproto.org/capnproto-c++-0.0.0.tar.gz</a>
tar zxf capnproto-c++-0.0.0.tar.gz
cd capnproto-c++-0.0.0
./configure
make -j6 check
sudo make install</code></pre>

<p>This will install <code>capnp</code>, the Cap’n Proto command-line tool.  It will also install <code>libcapnp</code>,
<code>libcapnpc</code>, and <code>libkj</code> in <code>/usr/local/lib</code> and headers in <code>/usr/local/include/capnp</code> and
<code>/usr/local/include/kj</code>.</p>

<p><strong>From Git</strong></p>

<p>If you download directly from Git, you will need to have the GNU autotools –
<a href="http://www.gnu.org/software/autoconf/">autoconf</a>,
<a href="http://www.gnu.org/software/automake/">automake</a>, and
<a href="http://www.gnu.org/software/libtool/">libtool</a> – installed.  You will also need Subversion
installed (in addition to Git) in order to fetch the Google Test sources (done by
<code>setup-autotools.sh</code>).</p>

<pre><code>git clone https://github.com/kentonv/capnproto.git
cd capnproto/c++
./setup-autotools.sh
autoreconf -i
./configure
make -j6 check
sudo make install
</code></pre>

<h2 id="installation-windows">Installation: Windows</h2>

<ol>
  <li>
    <p>Download Cap’n Proto Win32 build:</p>

    <pre><a href="https://capnproto.org/capnproto-c++-win32-0.0.0.zip">https://capnproto.org/capnproto-c++-win32-0.0.0.zip</a></pre>
  </li>
  <li>
    <p>Find <code>capnp.exe</code>, <code>capnpc-c++.exe</code>, and <code>capnpc-capnp.exe</code> under <code>capnproto-tools-win32-0.0.0</code> in
the zip and copy them somewhere.</p>
  </li>
</ol>

<p>If you don’t care about C++ support, you can stop here. The compiler exe can be used with plugins
provided by projects implementing Cap’n Proto in other languages.</p>

<p>If you want to use Cap’n Proto in C++ with Visual Studio, do the following:</p>

<ol>
  <li>
    <p>Install <a href="http://www.cmake.org/">CMake</a> version 3.1 or later.</p>
  </li>
  <li>
    <p>Use CMake to generate Visual Studio project files under <code>capnproto-c++-0.0.0</code> in the zip file.
You will need to enable the CMake project options <code>CAPNP_LITE</code> and <code>EXTERNAL_CAPNP</code>.
You can use the CMake UI for this or run this shell command:</p>

    <pre><code>cmake -G "Visual Studio 14 2015" -DCAPNP_LITE=1 -DEXTERNAL_CAPNP=1
</code></pre>

    <p>If the <code>capnp.exe</code> and <code>capnpc-c++.exe</code> tools are not on your <code>PATH</code>, then <code>CAPNP_EXECUTABLE</code>
 and <code>CAPNPC_CXX_EXECUTABLE</code> will need to be set to their respective locations.</p>
  </li>
  <li>
    <p>Open the “Cap’n Proto” solution in Visual Studio.</p>
  </li>
  <li>
    <p>Adjust the project build options (e.g., choice of C++ runtime library, enable/disable exceptions
and RTTI) to match the options of the project in which you plan to use Cap’n Proto.</p>
  </li>
  <li>
    <p>Build the solution (<code>ALL_BUILD</code>).</p>
  </li>
  <li>
    <p>Build the <code>INSTALL</code> project to copy the compiled libraries and header files into <code>CMAKE_INSTALL_PREFIX</code>.</p>

    <p>Alternatively, find the compiled <code>.lib</code> files in the build directory under
<code>src/{capnp,kj}/{Debug,Release}</code> and place them somewhere where your project can link against them.
Also add the <code>src</code> directory to your search path for <code>#include</code>s, or copy all the headers to your
project’s include directory.</p>
  </li>
  <li>
    <p>Add <code>#define CAPNP_LITE 1</code> to either your project’s precompiled/shared header or compiler options. </p>
  </li>
</ol>

<p><strong>From Git</strong></p>

<p>If you download directly from Git, you’ll need to compile the Cap’n Proto tools (the <code>.exe</code>s) using
MinGW-w64. This is easiest to do in Cygwin or on Linux. For example, on Debian or Ubuntu, you can
install MinGW like so:</p>

<pre><code>sudo apt-get install mingw-w64
</code></pre>

<p>You’ll first need to install Cap’n Proto on the host system (using the Unix installation
instructions, above). Then, do:</p>

<pre><code>make distclean
./configure --host=i686-w64-mingw32 --with-external-capnp \
  --disable-shared CXXFLAGS='-static-libgcc -static-libstdc++'
make -j6 capnp.exe capnpc-c++.exe capnpc-capnp.exe
</code></pre>

<p>Now that you have the <code>exe</code>s, you can proceed with the usual Windows compilation instructions.</p>

<script type="text/javascript">setupSidebar()</script>
        <div style="clear: both;"></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cap'n Proto maintained by <a href="https://github.com/kentonv">kentonv</a>
          <span class="gplus-followbutton"><span class="g-follow" data-annotation="bubble" data-height="15" data-href="//plus.google.com/118187272963262049674" data-rel="author"></span></span>
          <a href="https://www.gittip.com/kentonv/"><img class="gittip15" src="/capnproto/next/images/gittip15.png" alt="Gittip"></a></p>
        <p>Design by <a href="http://www.starfruit-cafe.net/blog">sailorhg</a> ∙ Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    <!-- Google+ follow button. -->
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>

    <!-- Google Analytics. -->
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-39711112-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>

